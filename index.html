<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üé≤ DERN88 üé∞</title>
  <style>
    body {
      margin: 0;
      background-color: #1c1c2c;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
    }
    h1 {
      font-family: Impact, sans-serif;
      font-size: 72px;
      color: #98FF98;
      margin: 20px 0;
    }
    .balance {
      font-size: 28px;
      color: gold;
      margin-bottom: 10px;
    }
    .mode-buttons button,
    .game-buttons button {
      font-size: 20px;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      cursor: pointer;
      border-radius: 10px;
    }
    .game-buttons {
      margin: 20px 0;
    }
    #roll-btn, #spin-btn {
      font-size: 28px;
      width: 300px;
      padding: 20px;
      margin: 20px auto;
    }
    .output {
      background: black;
      color: lime;
      font-family: Consolas, monospace;
      padding: 10px;
      margin: 20px auto;
      width: 80%;
      height: 150px;
      overflow-y: auto;
      white-space: pre-wrap;
      border-radius: 10px;
    }
    .input-area {
      margin: 10px;
    }
    .input-area input {
      font-size: 20px;
      width: 100px;
      margin: 5px;
    }
    .slot-display {
      font-size: 64px;
      margin: 20px 0;
    }
    #exit-btn {
      font-size: 18px;
      padding: 10px 20px;
      margin-top: 20px;
      background: gray;
      color: white;
    }
    #login-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: #1c1c2c;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #login-screen input {
      font-size: 22px;
      padding: 10px;
      margin: 10px;
      width: 200px;
      text-align: center;
    }
    #login-screen button {
      font-size: 22px;
      padding: 10px 20px;
    }
  </style>
</head>
<body>

  <div id="login-screen">
    <h1>üé≤ DERN88 üé∞</h1>
    <input type="text" id="username" placeholder="Username">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login / Signup</button>
    <div id="login-error" style="color:red; margin-top:10px;"></div>
  </div>

  <h1>üé≤ DERN88 üé∞</h1>
  <div class="balance" id="balance">Balance: $0</div>

  <div class="mode-buttons">
  <button style="background:#222244; color:white;" onclick="setMode('dice')">Dice Game</button>
  <button style="background:#442222; color:white;" onclick="setMode('slot')">Slot Game</button>
  <button onclick="setMode('minesweeper')" style="background-color: #336633; color: white;">Minesweeper [NEW!]</button>
</div>

<div id="minesweeper-container" style="display:none; margin-top:20px;">
  <h3 style="color:white;">üí£ Pick a Safe Tile!</h3>
  <div id="minesweeper-grid"></div>
</div>

  <div class="input-area">
    <div>
      <label>Bet Amount: <input type="number" id="bet" value="50"></label>
    </div>
    <div id="guess-area">
      <label>Your Guess (1‚Äì6): <input type="number" id="guess" value="3" min="1" max="6"></label>
    </div>
  </div>

  <div class="game-buttons">
    <button id="roll-btn" onclick="rollDice()" style="background:#00AA88; color:white;">üé≤ Roll Dice</button>
    <button id="spin-btn" onclick="spinSlot()" style="background:#BB2244; color:white; display:none;">üé∞ Spin</button>
  </div>

  <div class="slot-display" id="slot">üé∞ üé∞ üé∞</div>

  <div class="output" id="log">üé≤ Dice mode activated.</div>

  <button id="exit-btn" onclick="window.close()">Exit</button>

  <script>
    let balance = 500;
    let currentUser = null;
    let spinning = false;

    function login() {
      const name = document.getElementById("username").value.trim();
      const pass = document.getElementById("password").value.trim();
      if (!name || !pass) return showLoginError("Enter both username and password.");
      const userKey = "dern88_" + name;
      const saved = localStorage.getItem(userKey);
      const savedPass = localStorage.getItem(userKey + "_pass");

      if (saved) {
        if (savedPass !== pass) return showLoginError("‚ùå Wrong password.");
        balance = parseInt(saved);
        log(`Welcome back, ${name}!`);
      } else {
        balance = 500;
        localStorage.setItem(userKey, balance);
        localStorage.setItem(userKey + "_pass", pass);
        log(`Welcome, ${name}! Account created.`);
      }

      currentUser = name;
      updateBalance();
      document.getElementById("login-screen").style.display = "none";
    }

    function showLoginError(msg) {
      document.getElementById("login-error").innerText = msg;
    }

    function updateBalance() {
      document.getElementById("balance").innerText = `Balance: $${balance}`;
      if (currentUser) localStorage.setItem("dern88_" + currentUser, balance);
    }

    function log(msg) {
      const logBox = document.getElementById("log");
      logBox.innerText += `\n${msg}`;
      logBox.scrollTop = logBox.scrollHeight;
    }

    function setMode(mode) {
      document.getElementById('roll-btn').style.display = mode === 'dice' ? 'inline-block' : 'none';
      document.getElementById('spin-btn').style.display = mode === 'slot' ? 'inline-block' : 'none';
      document.getElementById('guess-area').style.display = mode === 'dice' ? 'block' : 'none';
      document.getElementById('minesweeper-container').style.display = mode === 'minesweeper' ? 'block' : 'none';
      log(mode === 'minesweeper' ? "üí£ Minesweeper mode activated." : mode === 'slot' ? "üé∞ Slot mode activated." : "üé≤ Dice mode activated.");
      if (mode === 'minesweeper') initMinesweeper();
    }

    function rollDice() {
      const bet = parseInt(document.getElementById("bet").value);
      const guess = parseInt(document.getElementById("guess").value);
      if (isNaN(bet) || isNaN(guess)) return log("‚ùå Enter valid bet and guess.");
      if (bet <= 0 || bet > balance) return log("‚ùå Invalid bet.");
      if (guess < 1 || guess > 6) return log("‚ùå Guess must be 1 to 6.");

      const roll = Math.floor(Math.random() * 6) + 1;
      log(`üé≤ You guessed ${guess}. Dice rolled: ${roll}`);
      if (roll === guess) {
        balance += bet;
        log(`‚úÖ You won $${bet}!`);
      } else {
        balance -= bet;
        log(`‚ùå You lost $${bet}.`);
      }
      updateBalance();
    }

    function spinSlot() {
      const bet = parseInt(document.getElementById("bet").value);
      if (isNaN(bet) || bet <= 0 || bet > balance || spinning) {
        log("‚ùå Invalid bet or already spinning.");
        return;
      }

      spinning = true;
      document.getElementById("spin-btn").disabled = true;
      log("üîÑ Spinning...");

      const symbols = ['üçí', 'üçã', 'üîî', 'üíé', '7Ô∏è'];
      let steps = 10;
      let slots = [];

      const spinInterval = setInterval(() => {
        slots = [randomSymbol(), randomSymbol(), randomSymbol()];
        document.getElementById("slot").innerText = slots.join(" ");
        steps--;
        if (steps <= 0) {
          clearInterval(spinInterval);
          evaluateSlot(slots, bet);
          spinning = false;
          document.getElementById("spin-btn").disabled = false;
        }
      }, 150);
    }

    function randomSymbol() {
      const symbols = ['üçí', 'üçã', 'üîî', 'üíé', '7Ô∏è'];
      return symbols[Math.floor(Math.random() * symbols.length)];
    }

    function evaluateSlot(slots, bet) {
      if (slots[0] === slots[1] && slots[1] === slots[2]) {
        const win = bet * 5;
        balance += win;
        log(`üéâ JACKPOT! You won $${win} with ${slots[0]}!`);
      } else if (slots[0] === slots[1] || slots[1] === slots[2] || slots[0] === slots[2]) {
        const win = bet * 2;
        balance += win;
        log(`‚ú® Nice! You won $${win}.`);
      } else {
        balance -= bet;
        log(`üôÅ No match. You lost $${bet}.`);
      }
      updateBalance();
    }

    function initMinesweeper() {
      const grid = document.getElementById("minesweeper-grid");
      grid.innerHTML = "";
      const bet = parseInt(document.getElementById("bet").value);
      if (isNaN(bet) || bet <= 0 || bet > balance) {
        log("‚ùå Invalid bet.");
        return;
      }

      const rows = 5, cols = 5, total = rows * cols, mines = 10;
      const mineIndexes = new Set();
      while (mineIndexes.size < mines) {
        mineIndexes.add(Math.floor(Math.random() * total));
      }

      for (let i = 0; i < total; i++) {
        const cell = document.createElement("button");
        cell.dataset.index = i;
        cell.style.width = "50px";
        cell.style.height = "50px";
        cell.style.margin = "2px";
        cell.style.fontSize = "22px";
        cell.style.background = "#444";
        cell.style.color = "white";

        cell.onclick = function () {
          const index = parseInt(this.dataset.index);
          if (mineIndexes.has(index)) {
            this.innerText = "üí£";
            this.style.background = "red";
            balance -= bet;
            updateBalance();
            log(`üí• Mine hit! You lost $${bet}`);
            disableAll(grid);
            const restartBtn = document.createElement("button");
            restartBtn.innerText = "Restart";
            restartBtn.style.marginTop = "10px";
            restartBtn.onclick = initMinesweeper;
            grid.appendChild(document.createElement("br"));
            grid.appendChild(restartBtn);
          } else {
            this.innerText = "‚úÖ";
            this.style.background = "green";
            balance += bet;
            updateBalance();
            log(`üéØ Safe! You won $${bet}`);
          }
          this.disabled = true;
        };

        grid.appendChild(cell);
        if ((i + 1) % cols === 0) grid.appendChild(document.createElement("br"));
      }
    }

    function disableAll(container) {
      const buttons = container.querySelectorAll("button");
      buttons.forEach(btn => btn.disabled = true);
    }
  </script>
</body>
</html>


