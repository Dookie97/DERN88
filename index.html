<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>🎲 DERN88 🎰</title>
  <style>
    body {
      margin: 0;
      background-color: #1c1c2c;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
    }
    h1 {
      font-family: Impact, sans-serif;
      font-size: 72px;
      color: #98FF98;
      margin: 20px 0;
    }
    .balance {
      font-size: 28px;
      color: gold;
      margin-bottom: 10px;
    }
    .mode-buttons button,
    .game-buttons button {
      font-size: 20px;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      cursor: pointer;
      border-radius: 10px;
    }
    .game-buttons {
      margin: 20px 0;
    }
    #roll-btn, #spin-btn {
      font-size: 28px;
      width: 300px;
      padding: 20px;
      margin: 20px auto;
    }
    .output {
      background: black;
      color: lime;
      font-family: Consolas, monospace;
      padding: 10px;
      margin: 20px auto;
      width: 80%;
      height: 150px;
      overflow-y: auto;
      white-space: pre-wrap;
      border-radius: 10px;
    }
    .input-area {
      margin: 10px;
    }
    .input-area input {
      font-size: 20px;
      width: 100px;
      margin: 5px;
    }
    .slot-display {
      font-size: 64px;
      margin: 20px 0;
    }
    #exit-btn {
      font-size: 18px;
      padding: 10px 20px;
      margin-top: 20px;
      background: gray;
      color: white;
    }
  </style>
</head>
<body>

  <h1>🎲 DERN88 🎰</h1>
  <div class="balance" id="balance">Balance: $500</div>

  <div class="mode-buttons">
    <button style="background:#222244; color:white;" onclick="setMode('dice')">Dice Game</button>
    <button style="background:#442222; color:white;" onclick="setMode('slot')">Slot Game</button>
    <button onclick="setMode('minesweeper')" style="background-color: #336633; color: white;">Minesweeper [NEW!]</button>

    <div id="minesweeper-container" style="display:none; margin-top:20px;">
  <h3 style="color:white;">💣 Pick a Safe Tile!</h3>
  <div id="minesweeper-grid"></div>
</div>

  </div>

  <div class="input-area">
    <div>
      <label>Bet Amount: <input type="number" id="bet" value="50"></label>
    </div>
    <div id="guess-area">
      <label>Your Guess (1–6): <input type="number" id="guess" value="3" min="1" max="6"></label>
    </div>
  </div>

  <div class="game-buttons">
    <button id="roll-btn" onclick="rollDice()" style="background:#00AA88; color:white;">🎲 Roll Dice</button>
    <button id="spin-btn" onclick="spinSlot()" style="background:#BB2244; color:white; display:none;">🎰 Spin</button>
  </div>

  <div class="slot-display" id="slot">🎰 🎰 🎰</div>

  <div class="output" id="log">🎲 Dice mode activated.</div>

  <button id="exit-btn" onclick="window.close()">Exit</button>

  <script>
    let balance = 500;
    let currentMode = 'dice';
    let spinning = false;

    function updateBalance() {
      document.getElementById('balance').innerText = `Balance: $${balance}`;
      if (balance <= 0) {
        log("💀 You're out of money!");
        document.getElementById('roll-btn').disabled = true;
        document.getElementById('spin-btn').disabled = true;
      }
    }

    function setMode(mode) {
      currentMode = mode;
      document.getElementById('roll-btn').style.display = mode === 'dice' ? 'inline-block' : 'none';
      document.getElementById('spin-btn').style.display = mode === 'slot' ? 'inline-block' : 'none';
      document.getElementById('guess-area').style.display = mode === 'dice' ? 'block' : 'none';
      log(mode === 'dice' ? "🎲 Dice mode activated." : "🎰 Slot mode activated.");
    }

    function log(message) {
      const logBox = document.getElementById('log');
      logBox.innerText += `\n${message}`;
      logBox.scrollTop = logBox.scrollHeight;
    }

    function rollDice() {
      const bet = parseInt(document.getElementById('bet').value);
      const guess = parseInt(document.getElementById('guess').value);
      if (isNaN(bet) || isNaN(guess)) return log("❌ Enter valid bet and guess.");
      if (bet <= 0 || bet > balance) return log("❌ Invalid bet.");
      if (guess < 1 || guess > 6) return log("❌ Guess must be 1 to 6.");

      const roll = Math.floor(Math.random() * 6) + 1;
      log(`🎲 You guessed ${guess}. Dice rolled: ${roll}`);
      if (roll === guess) {
        balance += bet;
        log(`✅ You won $${bet}!`);
      } else {
        balance -= bet;
        log(`❌ You lost $${bet}.`);
      }
      updateBalance();
    }

    function spinSlot() {
      const bet = parseInt(document.getElementById('bet').value);
      if (isNaN(bet) || bet <= 0 || bet > balance || spinning) {
        log("❌ Invalid bet or already spinning.");
        return;
      }

      spinning = true;
      document.getElementById('spin-btn').disabled = true;
      log("🔄 Spinning...");

      const symbols = ['🍒', '🍋', '🔔', '💎', '7️'];
      let steps = 10;
      let slots = [];

      const spinInterval = setInterval(() => {
        slots = [randomSymbol(), randomSymbol(), randomSymbol()];
        document.getElementById('slot').innerText = slots.join(' ');
        steps--;
        if (steps <= 0) {
          clearInterval(spinInterval);
          evaluateSlot(slots, bet);
          spinning = false;
          document.getElementById('spin-btn').disabled = false;
        }
      }, 150);
    }

    function randomSymbol() {
      const symbols = ['🍒', '🍋', '🔔', '💎', '7️'];
      return symbols[Math.floor(Math.random() * symbols.length)];
    }

    function evaluateSlot(slots, bet) {
      if (slots[0] === slots[1] && slots[1] === slots[2]) {
        const win = bet * 5;
        balance += win;
        log(`🎉 JACKPOT! You won $${win} with ${slots[0]}!`);
      } else if (slots[0] === slots[1] || slots[1] === slots[2] || slots[0] === slots[2]) {
        const win = bet * 2;
        balance += win;
        log(`✨ Nice! You won $${win}.`);
      } else {
        balance -= bet;
        log(`🙁 No match. You lost $${bet}.`);
      }
      updateBalance();
    }

function setMode(mode) {
  document.getElementById('roll-btn').style.display = mode === 'dice' ? 'inline-block' : 'none';
  document.getElementById('spin-btn').style.display = mode === 'slot' ? 'inline-block' : 'none';
  document.getElementById('guess-area').style.display = mode === 'dice' ? 'block' : 'none';
  document.getElementById('minesweeper-container').style.display = mode === 'minesweeper' ? 'block' : 'none';
  log(mode === 'minesweeper' ? "💣 Minesweeper mode activated." : "");
  if (mode === 'minesweeper') initMinesweeper();
}

function initMinesweeper() {
  const grid = document.getElementById("minesweeper-grid");
  grid.innerHTML = "";

  const bet = parseInt(document.getElementById("bet").value);
  if (isNaN(bet) || bet <= 0 || bet > balance) {
    log("❌ Invalid bet.");
    return;
  }

  const rows = 5, cols = 5, total = rows * cols, mines = 5;
  const mineIndexes = new Set();
  while (mineIndexes.size < mines) {
    mineIndexes.add(Math.floor(Math.random() * total));
  }

  for (let i = 0; i < total; i++) {
  const cell = document.createElement("button");
  cell.dataset.index = i;
  cell.style.width = "50px";
  cell.style.height = "50px";
  cell.style.margin = "2px";
  cell.style.fontSize = "22px";
  cell.style.background = "#444";
  cell.style.color = "white";

  cell.onclick = function () {
    const index = parseInt(this.dataset.index);
    if (mineIndexes.has(index)) {
      this.innerText = "💣";
      this.style.background = "red";
      balance -= bet;
      updateBalance();
      log(`💥 Mine hit! You lost $${bet}`);

      // Disable all buttons
      const buttons = grid.querySelectorAll("button");
      buttons.forEach(btn => btn.disabled = true);

      // Add Restart button
      const restartBtn = document.createElement("button");
      restartBtn.innerText = "Restart";
      restartBtn.style.marginTop = "10px";
      restartBtn.onclick = initMinesweeper;
      grid.appendChild(document.createElement("br"));
      grid.appendChild(restartBtn);
    } else {
      this.innerText = "✅";
      this.style.background = "green";
      balance += bet;
      updateBalance();
      log(`🎯 Safe! You won $${bet}`);
    }

    this.disabled = true;
  };

  grid.appendChild(cell);
  if ((i + 1) % cols === 0) grid.appendChild(document.createElement("br"));
}

  if (mineIndexes.has(i)) {
  this.innerText = "💣";
  this.style.background = "red";
  balance -= bet;
  updateBalance();
  log(`💥 Mine hit! You lost $${bet}`);

  // Disable all cells
  const buttons = grid.querySelectorAll("button");
  buttons.forEach(btn => btn.disabled = true);

  // Create and show restart button
  const restartBtn = document.createElement("button");
  restartBtn.innerText = "Restart";
  restartBtn.style.marginTop = "10px";
  restartBtn.onclick = initMinesweeper;
  grid.appendChild(document.createElement("br"));
  grid.appendChild(restartBtn);

  return;
}
};

    grid.appendChild(cell);
    if ((i + 1) % cols === 0) grid.appendChild(document.createElement("br"));
  </script>
</body>
</html>
